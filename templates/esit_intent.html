<!-- Add before </body> in base.html -->
<div id="exit-popup" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); z-index:99999;">
  <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:#111; max-width:550px; width:95%; padding:35px; border-radius:15px; border:3px solid #00ff88; box-shadow:0 0 40px #00ff88;">
    <span id="close-exit" style="position:absolute; top:15px; right:20px; font-size:28px; cursor:pointer; color:#999;">&times;</span>
    
    <h2 style="color:#00ff88; font-size:24px; margin:0 0 15px 0; text-align:center;">ðŸ”¥ FREE: MY $1,000/MONTH CAMPING BUSINESS BLUEPRINT</h2>
    
    <p style="margin:15px 0; text-align:center; color:#fff; font-size:16px;">Join <span id="random-count">2,847</span>+ guerilla campers who use this <strong>exact system</strong> to earn while living free</p>
    
    <form id="exit-form" action="https://app.mailerlite.com/webforms/submit/7qFupG" method="post" style="display:flex; flex-direction:column; gap:15px; margin:25px 0;">
      <input type="email" name="email" placeholder="Your email..." required style="padding:15px; font-size:18px; border-radius:8px; border:none; background:#222; color:#fff;">
      <button type="submit" style="padding:15px; font-size:18px; font-weight:bold; border-radius:8px; border:none; background:#00ff88; color:#111; cursor:pointer;">GET FREE ACCESS NOW â†’</button>
    </form>
    
    <p style="color:#999; font-size:12px; text-align:center; margin:10px 0 0 0;">No spam. Unsubscribe anytime.</p>
  </div>
</div>

<script>
// Random subscriber count for social proof
document.getElementById('random-count').textContent = Math.floor(Math.random() * 60) + 2820;

// Exit intent detection
let exitShown = sessionStorage.getItem('exitShown') === 'true';

document.addEventListener('mouseout', e => {
  if (!exitShown && e.clientY < 5) {
    document.getElementById('exit-popup').style.display = 'block';
    exitShown = true;
    sessionStorage.setItem('exitShown', 'true');
  }
});

// Close popup
document.getElementById('close-exit').addEventListener('click', () => {
  document.getElementById('exit-popup').style.display = 'none';
});

// Also show exit popup after 40 seconds (catches mobile users)
setTimeout(function() {
  if (!exitShown) {
    document.getElementById('exit-popup').style.display = 'block';
    exitShown = true;
    sessionStorage.setItem('exitShown', 'true');
  }
}, 40000);
</script>
